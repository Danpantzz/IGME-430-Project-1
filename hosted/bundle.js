/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./client/client.js":
/*!**************************!*\
  !*** ./client/client.js ***!
  \**************************/
/***/ (() => {

eval("const handleResponse = async (response) => {\r\n  const showContainer = document.querySelector('#show-container');\r\n  const marvelURL = \"https://gateway.marvel.com:443/v1/public/\"\r\n  const publicKey = '3d064ffe33b8e2b0c086c74a3b6181e7';\r\n  const ts = '1696798502523';\r\n  const hash = '96a9e4a23329c23b0d63a3b54637dce4';\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      console.log(`Success: ${response.status}`);\r\n      break;\r\n    case 201:\r\n      showContainer.innerHTML = `<b>Favorited!</b>`;\r\n      break;\r\n    case 204:\r\n      showContainer.innerHTML = `<b>Favorited!</b>`;\r\n      break;\r\n    case 400:\r\n      showContainer.innerHTML = `<b>Bad Request</b>`;\r\n      break;\r\n    case 404:\r\n      showContainer.innerHTML = `<b>Not Found</b>`;\r\n      break;\r\n    default:\r\n      showContainer.innerHTML = `Error code not implemented by client.`;\r\n      break;\r\n  }\r\n\r\n  let obj = await response.json();\r\n\r\n  showContainer.innerHTML = \"\";\r\n\r\n  obj.users[`${username.value}`].forEach(async (item) => {\r\n    const url = `${marvelURL}characters?ts=${ts}&apikey=${publicKey}&hash=${hash}&name=${item.character}`;\r\n\r\n    const response = await fetch(url);\r\n    const jsonData = await response.json();\r\n    jsonData.data[\"results\"].forEach((element) => {\r\n      const div = document.createElement(\"div\");\r\n      div.innerHTML = `\r\n      <div class=\"card-container\">\r\n        <div class=\"container-character-image\">\r\n          <img src=\"${element.thumbnail[\"path\"] + \".\" + element.thumbnail[\"extension\"]}\" />\r\n        </div>\r\n        <div class=\"character-name\">${element.name}</div>\r\n        <div class=\"character-description\">${element.description}</div>\r\n      </div>`;\r\n      if (!element.description) {\r\n        div.innerHTML = `\r\n      <div class=\"card-container\">\r\n        <div class=\"container-character-image\">\r\n          <img src=\"${element.thumbnail[\"path\"] + \".\" + element.thumbnail[\"extension\"]}\" />\r\n        </div>\r\n        <div class=\"character-name\">${element.name}</div>\r\n        <div class=\"character-description\">No Description Provided.</div>\r\n      </div>`;\r\n\r\n      }\r\n      showContainer.appendChild(div);\r\n    });\r\n  })\r\n\r\n  //let jsonString = JSON.stringify(obj);\r\n  //showContainer.innerHTML += `<p>${jsonString}</p>`;\r\n\r\n\r\n};\r\n\r\nconst sendPost = async (searchForm) => {\r\n  const searchAction = searchForm.getAttribute('action');\r\n  const searchMethod = searchForm.getAttribute('method');\r\n\r\n  const formData = `username=${username.value}&character=${searchForm.value}`;\r\n\r\n  let response = await fetch(searchAction, {\r\n    method: searchMethod,\r\n    headers: {\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n      'Accept': 'application/json',\r\n    },\r\n    body: formData,\r\n  });\r\n\r\n  handleResponse(response);\r\n};\r\n\r\nconst requestUpdate = async (button) => {\r\n  const searchAction = button.getAttribute('action');\r\n  const method = button.getAttribute('method');\r\n\r\n  let response = await fetch(searchAction, {\r\n    method,\r\n    headers: {\r\n      'Accept': 'application/json'\r\n    },\r\n  });\r\n\r\n  handleResponse(response);\r\n};\r\n\r\nconst removeFavorite = (name) => {\r\n  name.value = searchForm.value;\r\n  sendPost(name);\r\n}\r\n\r\nconst favorite = (name) => {\r\n  console.log(`favorite: ${name}`);\r\n  sendPost(name);\r\n}\r\n\r\nconst init = () => {\r\n  const marvelURL = \"https://gateway.marvel.com:443/v1/public/\"\r\n  const publicKey = '3d064ffe33b8e2b0c086c74a3b6181e7';\r\n  const ts = '1696798502523';\r\n  const hash = '96a9e4a23329c23b0d63a3b54637dce4';\r\n\r\n  const searchForm = document.querySelector(\"#searchForm\");\r\n  const searchButton = document.querySelector(\"#searchButton\");\r\n  const allButton = document.querySelector(\"#allButton\");\r\n  const showContainer = document.querySelector(\"#show-container\");\r\n  const listContainer = document.querySelector(\".list\");\r\n  const favoritesButton = document.querySelector(\"#favoritesButton\");\r\n  const username = document.querySelector(\"#username\");\r\n\r\n  let offset = 0;\r\n\r\n\r\n\r\n  const removeElements = () => {\r\n    listContainer.innerHTML = \"\";\r\n  }\r\n\r\n  const displayWords = (value) => {\r\n    searchForm.value = value;\r\n    removeElements();\r\n  }\r\n\r\n  const displayOptions = async () => {\r\n    removeElements();\r\n\r\n    if (searchForm.value.length < 4) {\r\n      return false;\r\n    }\r\n\r\n    const url = `${marvelURL}characters?ts=${ts}&apikey=${publicKey}&hash=${hash}&nameStartsWith=${searchForm.value}`;\r\n\r\n    const response = await fetch(url);\r\n    const jsonData = await response.json();\r\n\r\n    jsonData.data[\"results\"].forEach((result) => {\r\n      let name = result.name;\r\n      let div = document.createElement(\"div\");\r\n      div.style.cursor = \"pointer\";\r\n      div.classList.add(\"autocomplete-items\");\r\n      div.addEventListener(\"click\", () => { displayWords(name) });\r\n      let word = \"<b>\" + name.substr(0, searchForm.value.length) + \"</b>\";\r\n      word += name.substr(searchForm.value.length);\r\n      div.innerHTML = `<p class=\"item\">${word}</p>`;\r\n      listContainer.appendChild(div);\r\n    })\r\n  }\r\n\r\n  const searchCharacter = async (e) => {\r\n    if (searchForm.value.trim().length < 1) {\r\n      alert(\"Input cannot be blank\");\r\n    }\r\n\r\n    showContainer.innerHTML = \"\";\r\n    const url = `${marvelURL}characters?ts=${ts}&apikey=${publicKey}&hash=${hash}&name=${searchForm.value}`;\r\n\r\n    const response = await fetch(url);\r\n    const jsonData = await response.json();\r\n    jsonData.data[\"results\"].forEach((element) => {\r\n      showContainer.innerHTML = `\r\n      <div class=\"card-container\">\r\n        <div class=\"container-character-image\">\r\n          <img src=\"${element.thumbnail[\"path\"] + \".\" + element.thumbnail[\"extension\"]}\" />\r\n        </div>\r\n        <div class=\"character-name\">${element.name}</div>\r\n        <div class=\"character-description\">${element.description}</div>\r\n        <div class=\"character-buttons\">\r\n          <button class=\"favorite-button\" id=\"remove-favorite\" action=\"/removeCharacter\" method=\"post\">Remove</button>\r\n          <button class=\"favorite-button\" id=\"favorite\">Favorite</button>\r\n        </div>\r\n      </div>`;\r\n      document.querySelector(\"#favorite\").addEventListener(\"click\", () => { favorite(searchForm); });\r\n      document.querySelector(\"#remove-favorite\").addEventListener(\"click\", () => { removeFavorite(document.querySelector(\"#remove-favorite\")); });\r\n\r\n    });\r\n  };\r\n\r\n  const showAll = async (e) => {\r\n    const url = `${marvelURL}characters?limit=100&offset=${offset}&ts=${ts}&apikey=${publicKey}&hash=${hash}`;\r\n\r\n    // remove all elements present when button is pressed again\r\n    let child = showContainer.firstElementChild;\r\n    while (child) {\r\n      showContainer.removeChild(child);\r\n      child = showContainer.firstElementChild;\r\n    }\r\n\r\n    const response = await fetch(url);\r\n    const jsonData = await response.json();\r\n    jsonData.data[\"results\"].forEach((element) => {\r\n      const div = document.createElement(\"div\");\r\n      div.innerHTML = `\r\n      <div class=\"card-container\">\r\n        <div class=\"container-character-image\">\r\n          <img src=\"${element.thumbnail[\"path\"] + \".\" + element.thumbnail[\"extension\"]}\" />\r\n        </div>\r\n        <div class=\"character-name\">${element.name}</div>\r\n        <div class=\"character-description\">${element.description}</div>\r\n      </div>`;\r\n      if (!element.description) {\r\n        div.innerHTML = `\r\n      <div class=\"card-container\">\r\n        <div class=\"container-character-image\">\r\n          <img src=\"${element.thumbnail[\"path\"] + \".\" + element.thumbnail[\"extension\"]}\" />\r\n        </div>\r\n        <div class=\"character-name\">${element.name}</div>\r\n        <div class=\"character-description\">No Description Provided.</div>\r\n      </div>`;\r\n      }\r\n      div.addEventListener(\"click\", () => {\r\n        searchForm.value = element.name;\r\n        searchCharacter();\r\n      });\r\n      showContainer.appendChild(div);\r\n    });\r\n  };\r\n\r\n  searchForm.addEventListener(\"keyup\", displayOptions);\r\n  searchButton.addEventListener(\"click\", searchCharacter);\r\n  allButton.addEventListener(\"click\", showAll);\r\n  favoritesButton.addEventListener(\"click\", (e) => {\r\n    requestUpdate(favoritesButton);\r\n  });\r\n};\r\n\r\nwindow.onload = init;\n\n//# sourceURL=webpack://http-api-assignment-ii/./client/client.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./client/client.js"]();
/******/ 	
/******/ })()
;